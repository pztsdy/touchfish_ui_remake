<!-- index.html -->
<!DOCTYPE html>
<html lang="zh-cn">

<head>
  <meta charset="UTF-8">
  <title>Touchfish UI Remake</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="node_modules/github-markdown-css/github-markdown.css">
  <link rel="stylesheet" href="dist/markdown-palettes.css">
  <link rel="stylesheet" href="node_modules/katex/dist/katex.css">
  <link rel="stylesheet" href="node_modules/highlight.js/styles/github.css">
  <script src="dist/markdown-palettes.js"></script>
</head>

<body>
  <div id="connection-page" class="page-container active">
    <div class="card">
      <h1 class="title">连接服务器</h1>
      <div class="form-group">
        <label for="ip">服务器IP:</label>
        <input type="text" id="ip" value="bopid.cn" placeholder="例如: 127.0.0.1">
      </div>
      <div class="form-group">
        <label for="port">端口:</label>
        <input type="number" id="port" value="7001" placeholder="例如: 8080">
      </div>
      <div class="form-group">
        <label for="username">用户名:</label>
        <input type="text" id="username" placeholder="君の名字">
      </div>
      <button id="connect-btn" class="main-btn">连接</button>
      <!--<p class="hint">提示: Ctrl+Enter 发送消息</p>-->
      <p id="version-info" class="version-info">获取中...</p>
    </div>
  </div>

  <div id="chat-page" class="page-container hidden">
    <div class="card chat-card">
      <div class="chat-header">
        <h1 id="chat-title">Touchfish UI Remake</h1>
        <button id="get-notice" class="icon-btn">📰</button>
        <button id="check-update" class="icon-btn">🔄</button>
        <button id="report-bug" class="icon-btn">🧐</button>
        <button id="update-log-btn" class="icon-btn">📝</button>
        <button id="settings-btn" class="icon-btn">⚙️</button>
      </div>
      <div id="messages" class="messages markdown-body" style="min-height: 300px; max-height: 300px; overflow-y: auto;"></div>
      <div class="chat-footer">
        <div id="md-editor-container" class="md-editor-container" style="min-height: 220px;">
          <div style="height: auto;" id="message-input" class="md-input" contenteditable="true" placeholder="输入消息..."></div>
        </div>
      
        <!-- 文件发送按钮放在发送按钮上方 -->
        <div class="chat-actions">
          <button id="file-btn" class="main-btn">发送文件</button>
          <button id="send-btn" class="main-btn">发送</button>
        </div>
      </div>
    </div>

    <div id="update-log-modal" class="modal hidden">
      <div class="modal-content">
        <span class="close-btn" id="close-update-log-btn">&times;</span>
        <h2>更新日志</h2>
        <pre id="update-log-content" class="update-log-content">
v1.5.0-preN:
 LaTeX+代码渲染
v1.5.0-pre:
 添加Markdown功能(输入&查看)
v1.4.0:
 修复字体无法显示的bug
 添加bug反馈功能
 添加连接界面输入占位符
v1.3.2:
 增加官方服务器支持
 优化使用官方服务器体验
 适配长度截断
v1.3.1:
 更改联网获取支持的服务器版本(piaoztsdy.cn/touchfishui.txt)
 支持官方Server v1.1.1版本
v1.3.0:
 修复了空行Bug
v1.2.0:
 添加了更新日志功能
 适配服务端屏蔽词功能
 增加了消息内容中的滚动条
 将更改颜色设置体验优化
 更改字体样式
 修复刷新窗口的bug(禁用刷新)
v1.1.0:
 模态框样式优化
 添加了设置颜色功能
 对系统消息等特殊消息进行颜色更改
v1.0.0:
 优化登陆界面
 更改聊天气泡样式</pre>
      </div>
    </div>

    <!-- 文件传输进度条 -->
    <div id="file-progress-container" class="file-progress-container hidden">
      <div class="file-progress-bar-container">
        <div id="file-progress-text" class="file-progress-text">文件传输中...</div>
        <div class="file-progress-bar-outer">
          <div id="file-progress-bar" class="file-progress-bar" style="width: 0%"></div>
        </div>
      </div>
    </div>
    
    <!-- 文件传输模态框 -->
    <div id="file-modal" class="modal hidden">
      <div class="modal-content">
        <span class="close-btn" id="close-file-modal-btn">&times;</span>
        <h2>文件传输</h2>
        <div id="file-transfer-content"></div>
      </div>
    </div>

    <div id="settings-modal" class="modal hidden">
      <div class="modal-content">
        <span class="close-btn" id="close-settings-btn">&times;</span>
        <h2>设置</h2>
    
        <div class="setting-group">
          <h3>通知设置</h3>
          <div class="setting-item">
            <label>
              <input type="checkbox" id="bell-enabled"> 启用消息提示音
            </label>
          </div>
          <div class="setting-item">
            <label>
              <input type="checkbox" id="notifier-enabled"> 启用系统通知
            </label>
          </div>
          <div class="setting-item">
            <label for="notifier-keywords">通知关键词（逗号分隔）:</label>
            <input type="text" id="notifier-keywords" placeholder="关键词1,关键词2">
          </div>
        </div>
    
        <div class="setting-group">
          <h3>字体设置</h3>
          <div class="setting-item">
            <label for="font-family">字体名称:</label>
            <input type="text" id="font-family" value="Maple Mono NF CN Light">
          </div>
          <div class="setting-item">
            <label for="font-size">字体大小:</label>
            <input type="number" id="font-size" value="14" min="10" max="30">
          </div>
        </div>
    
        <button class="main-btn" onclick="saveSettings()">保存设置</button>
      </div>
    </div>

    <div id="report-modal" class="modal hidden">
      <div class="modal-content">
        <span class="close-btn" id="close-report-btn">&times;</span>
        <h2>报告错误</h2>
        <form id="report-form">
          <div class="form-group">
            <label for="report-description">描述:</label>
            <textarea id="report-description" style="width: 395;" rows="11" placeholder="请详细描述您遇到的问题..." class="report-description">### 触发步骤
（请描述你是怎么操作时发生的）

### 当前版本
v1.5.0

### 系统信息
平台: e.g. Windows 10</textarea>
          </div>
          <button type="submit" class="main-btn" id="report-submit-btn">提交报告</button>
        </form>
      </div>
    </div>

    <div id="check-update-modal" class="modal hidden">
      <div class="modal-content">
        <span class="close-btn" id="close-check-update-btn">&times;</span>
        <h2>检查更新</h2>
        <pre id="check-update-content" class="check-update-content">正在检查更新...</pre>
      </div>
    </div>

    <div id="notice-modal" class="modal hidden">
      <div class="modal-content">
        <span class="close-btn" id="close-notice-btn">&times;</span>
        <h2>系统公告</h2>
        <ul id="notice-content" class="notice-content"></ul>
      </div>
    </div>
  <script src="renderer.js"></script>
</body>

</html>